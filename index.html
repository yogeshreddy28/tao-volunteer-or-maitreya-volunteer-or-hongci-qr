<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Mission in Action | Volunteer Join</title>
  <style>
    :root {
      --parchment: #E9D8B8;
      --maroon: #6A2E2A;
      --maroon-deep: #4C1E1A;
      --gold: #C8A24A;
      --ink: rgba(35, 24, 18, 0.92);
      --muted-ink: rgba(60, 42, 31, 0.78);
      --card-fill: rgba(233, 216, 184, 0.16);
      --card-stroke: rgba(200, 162, 74, 0.30);
      --input-fill: rgba(233, 216, 184, 0.24);
      --input-stroke: rgba(106, 46, 42, 0.22);
      --shadow: rgba(40, 20, 10, 0.35);
      --radius-lg: 26px;
      --radius-pill: 999px;
    }

    * {
      box-sizing: border-box;
    }

    html,
    body {
      margin: 0;
      min-height: 100%;
      color: var(--ink);
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      background:
        radial-gradient(140% 100% at 50% 30%, rgba(255, 246, 224, 0.62) 0%, rgba(233, 216, 184, 0.92) 58%, rgba(214, 191, 150, 0.96) 100%),
        radial-gradient(120% 130% at 8% 5%, rgba(255, 248, 230, 0.55) 0%, transparent 48%),
        radial-gradient(120% 130% at 92% 10%, rgba(125, 73, 63, 0.09) 0%, transparent 52%),
        radial-gradient(130% 130% at 50% 115%, rgba(88, 38, 32, 0.15) 0%, transparent 66%),
        var(--parchment);
      overflow-x: hidden;
    }

    body::before,
    body::after {
      content: "";
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
    }

    body::before {
      background:
        repeating-linear-gradient(
          0deg,
          rgba(68, 44, 24, 0.022) 0px,
          rgba(68, 44, 24, 0.022) 1px,
          transparent 1px,
          transparent 4px
        ),
        repeating-linear-gradient(
          90deg,
          rgba(80, 53, 30, 0.015) 0px,
          rgba(80, 53, 30, 0.015) 1px,
          transparent 1px,
          transparent 5px
        );
      opacity: 0.42;
    }

    body::after {
      background: radial-gradient(120% 130% at 50% 45%, transparent 45%, rgba(72, 35, 24, 0.23) 100%);
      opacity: 0.35;
    }

    .page {
      min-height: 100dvh;
      position: relative;
      z-index: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px 14px calc(24px + env(safe-area-inset-bottom));
      isolation: isolate;
    }

    .blob {
      position: absolute;
      border-radius: 50%;
      filter: blur(56px);
      pointer-events: none;
      opacity: 0.35;
      z-index: 0;
    }

    .blob.one {
      width: 180px;
      height: 180px;
      top: 10%;
      left: -6%;
      background: radial-gradient(circle at 30% 30%, rgba(200, 162, 74, 0.42), rgba(200, 162, 74, 0.02) 70%);
    }

    .blob.two {
      width: 200px;
      height: 200px;
      right: -8%;
      top: 28%;
      background: radial-gradient(circle at 35% 35%, rgba(106, 46, 42, 0.32), rgba(106, 46, 42, 0.03) 72%);
    }

    .blob.three {
      width: 220px;
      height: 220px;
      left: 8%;
      bottom: -4%;
      background: radial-gradient(circle at 35% 35%, rgba(173, 116, 63, 0.27), rgba(173, 116, 63, 0.03) 70%);
    }

    .card {
      width: min(100%, 460px);
      position: relative;
      z-index: 2;
      border-radius: var(--radius-lg);
      padding: 20px 14px 16px;
      background: var(--card-fill);
      border: 1px solid var(--card-stroke);
      box-shadow:
        0 20px 50px var(--shadow),
        inset 0 1px 0 rgba(255, 255, 255, 0.25);
      -webkit-backdrop-filter: blur(18px) saturate(130%);
      backdrop-filter: blur(18px) saturate(130%);
      overflow: hidden;
    }

    .card::before {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: inherit;
      pointer-events: none;
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.22), transparent 42%);
    }

    h1 {
      margin: 0;
      font-family: "Iowan Old Style", "Palatino Linotype", Palatino, Georgia, serif;
      font-size: clamp(1.4rem, 5vw, 1.8rem);
      letter-spacing: 0.01em;
      color: rgba(48, 25, 18, 0.96);
      text-wrap: balance;
    }

    .subtitle {
      margin: 8px 0 10px;
      color: var(--muted-ink);
      font-size: 0.94rem;
      line-height: 1.45;
    }

    .hint {
      margin: 0 0 14px;
      color: rgba(88, 53, 35, 0.88);
      font-size: 0.84rem;
      line-height: 1.35;
    }

    form {
      display: grid;
      gap: 10px;
    }

    label {
      display: block;
      margin: 0 10px 6px;
      font-size: 0.8rem;
      font-weight: 650;
      color: rgba(63, 33, 26, 0.95);
      letter-spacing: 0.01em;
    }

    .required {
      color: var(--maroon);
      font-weight: 800;
    }

    .field,
    .select,
    .textarea {
      width: 100%;
      min-height: 52px;
      border-radius: var(--radius-pill);
      border: 1px solid var(--input-stroke);
      background: linear-gradient(150deg, rgba(248, 235, 208, 0.5), var(--input-fill));
      color: var(--ink);
      font: inherit;
      font-size: 1rem;
      padding: 12px 14px;
      outline: none;
      box-shadow:
        inset 0 1px 0 rgba(255, 255, 255, 0.24),
        0 8px 20px rgba(70, 35, 20, 0.16);
      transition: box-shadow 0.18s ease, border-color 0.18s ease, transform 0.12s ease;
      -webkit-backdrop-filter: blur(8px);
      backdrop-filter: blur(8px);
    }

    .field::placeholder,
    .textarea::placeholder {
      color: rgba(92, 63, 48, 0.72);
    }

    .textarea {
      border-radius: 18px;
      min-height: 94px;
      resize: vertical;
    }

    .field:focus,
    .select:focus,
    .textarea:focus {
      border-color: rgba(200, 162, 74, 0.72);
      box-shadow:
        0 0 0 3px rgba(200, 162, 74, 0.25),
        inset 0 1px 0 rgba(255, 255, 255, 0.24),
        0 10px 22px rgba(70, 35, 20, 0.22);
      transform: translateY(-1px);
    }

    .select {
      appearance: none;
      -webkit-appearance: none;
      background-image:
        linear-gradient(45deg, transparent 50%, rgba(76, 30, 26, 0.88) 50%),
        linear-gradient(135deg, rgba(76, 30, 26, 0.88) 50%, transparent 50%);
      background-position: calc(100% - 20px) 24px, calc(100% - 14px) 24px;
      background-size: 6px 6px, 6px 6px;
      background-repeat: no-repeat;
      padding-right: 36px;
    }

    .error {
      min-height: 18px;
      margin: 2px 8px 2px;
      color: rgba(108, 40, 36, 0.92);
      font-size: 0.86rem;
    }

    .cta {
      width: 100%;
      min-height: 54px;
      border: 0;
      border-radius: var(--radius-pill);
      background: linear-gradient(135deg, #6A2E2A, #4C1E1A);
      color: #f4e6c6;
      font: inherit;
      font-size: 1rem;
      font-weight: 700;
      letter-spacing: 0.02em;
      cursor: pointer;
      box-shadow:
        0 10px 30px rgba(76, 30, 26, 0.35),
        0 0 0 1px rgba(200, 162, 74, 0.25) inset;
      transition: transform 0.1s ease, box-shadow 0.18s ease, opacity 0.18s ease;
    }

    .cta:active {
      transform: translateY(1px);
      box-shadow:
        0 6px 16px rgba(76, 30, 26, 0.3),
        0 0 0 1px rgba(200, 162, 74, 0.22) inset;
    }

    .cta:disabled {
      opacity: 0.78;
      cursor: not-allowed;
    }

    @media (min-width: 720px) {
      .card {
        padding: 24px 20px 18px;
      }

      form {
        gap: 12px;
      }
    }

    @media (prefers-reduced-motion: reduce) {
      .field,
      .select,
      .textarea,
      .cta {
        transition: none;
      }
    }
  </style>
</head>
<body>
  <main class="page">
    <span class="blob one" aria-hidden="true"></span>
    <span class="blob two" aria-hidden="true"></span>
    <span class="blob three" aria-hidden="true"></span>

    <section class="card" aria-labelledby="volunteer-title">
      <h1 id="volunteer-title">Join as Volunteer</h1>
      <p class="subtitle">Serve with Dharma. Scan &rarr; fill &rarr; WhatsApp opens. Tap Send.</p>
      <p class="hint">We'll add you to volunteer updates. âœ…</p>

      <form id="volunteerForm" novalidate>
        <div>
          <label for="fullName">Full Name <span class="required" aria-hidden="true">*</span></label>
          <input id="fullName" name="fullName" class="field" type="text" placeholder="Your full name" required autocomplete="name" autocapitalize="words" enterkeyhint="next" />
        </div>

        <div>
          <label for="phone">WhatsApp Number <span class="required" aria-hidden="true">*</span></label>
          <input id="phone" name="phone" class="field" type="tel" placeholder="10+ digit number" required inputmode="numeric" autocomplete="tel" enterkeyhint="next" />
        </div>

        <div>
          <label for="city">City/Area <span class="required" aria-hidden="true">*</span></label>
          <input id="city" name="city" class="field" type="text" placeholder="City or area" required autocomplete="address-level2" autocapitalize="words" enterkeyhint="next" />
        </div>

        <div>
          <label for="availability">Availability</label>
          <select id="availability" name="availability" class="select" aria-label="Availability">
            <option value="" selected>Choose availability (optional)</option>
            <option>Weekdays</option>
            <option>Weekends</option>
            <option>Evenings</option>
            <option>Flexible</option>
            <option>Occasional</option>
          </select>
        </div>

        <div>
          <label for="skills">Skills</label>
          <input id="skills" name="skills" class="field" type="text" placeholder="Teaching, event support, social media..." autocapitalize="sentences" enterkeyhint="next" />
        </div>

        <div>
          <label for="notes">Notes</label>
          <textarea id="notes" name="notes" class="textarea" placeholder="Any note (optional)"></textarea>
        </div>

        <div id="errorMessage" class="error" role="status" aria-live="polite"></div>

        <button id="submitBtn" class="cta" type="submit">Continue on WhatsApp</button>
      </form>
    </section>
  </main>

  <script>
    const WHATSAPP_NUMBER = "918050022692"; // dummy number, no +, no spaces

    const form = document.getElementById("volunteerForm");
    const phoneInput = document.getElementById("phone");
    const errorMessage = document.getElementById("errorMessage");
    const submitBtn = document.getElementById("submitBtn");

    let fallbackTimer = null;

    function sanitizePhone(value) {
      return String(value || "").replace(/\D+/g, "");
    }

    function setError(message) {
      errorMessage.textContent = message || "";
    }

    phoneInput.addEventListener("input", function onPhoneInput() {
      const clean = sanitizePhone(phoneInput.value);
      if (phoneInput.value !== clean) {
        phoneInput.value = clean;
      }
    });

    document.addEventListener("visibilitychange", function onVisibilityChange() {
      if (document.hidden && fallbackTimer) {
        clearTimeout(fallbackTimer);
        fallbackTimer = null;
      }
    });

    form.addEventListener("submit", function onSubmit(event) {
      event.preventDefault();
      setError("");

      if (!WHATSAPP_NUMBER || /X{3,}/i.test(WHATSAPP_NUMBER)) {
        setError("WhatsApp receiver number is not configured yet. Please update WHATSAPP_NUMBER.");
        return;
      }

      const name = document.getElementById("fullName").value.trim();
      const phone = sanitizePhone(phoneInput.value);
      const city = document.getElementById("city").value.trim();
      const availability = document.getElementById("availability").value.trim() || "Not specified";
      const skills = document.getElementById("skills").value.trim() || "Not specified";
      const notes = document.getElementById("notes").value.trim() || "Not specified";

      if (!name || !phone || !city) {
        setError("Please share your name, WhatsApp number, and city/area.");
        return;
      }

      if (phone.length < 10) {
        setError("Please enter a valid WhatsApp number with at least 10 digits.");
        return;
      }

      const message = [
        "Namaskar ðŸ™",
        "I want to join as a volunteer (Mission in Action).",
        "Name: " + name,
        "Phone: " + phone,
        "City/Area: " + city,
        "Availability: " + availability,
        "Skills: " + skills,
        "Note: " + notes,
        "Please add me to volunteer updates group. âœ…"
      ].join("\n");

      const encoded = encodeURIComponent(message);
      const deepLink = "whatsapp://send?phone=" + WHATSAPP_NUMBER + "&text=" + encoded;
      const webFallback = "https://wa.me/" + WHATSAPP_NUMBER + "?text=" + encoded;

      submitBtn.disabled = true;
      submitBtn.textContent = "Opening WhatsApp...";

      fallbackTimer = setTimeout(function fallbackToWeb() {
        window.location.href = webFallback;
      }, 700);

      window.location.href = deepLink;

      setTimeout(function releaseButton() {
        submitBtn.disabled = false;
        submitBtn.textContent = "Continue on WhatsApp";
      }, 2600);
    });
  </script>
</body>
</html>
